{
  "hash": "1ac66fedef8a40f01dd35efe16fabe81",
  "result": {
    "markdown": "---\ntitle: \"Directed Acyclic Graphs\"\nauthor: \"Shashidhar Cheeti\"\n---\n\n\n# Assignment\n\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-1_37290f5e1c687bad02de950013b9179a'}\n\n```{.r .cell-code}\n# Load necessary Libraries\nlibrary(tidyverse)\nlibrary(dagitty)\nlibrary(ggdag)\n```\n:::\n\n1. DAG for Parking Spots\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-2_338ecc1362326f9f00eec28c1eee4c07'}\n\n```{.r .cell-code}\nParkingspots <- dagify(\n  ParkingSpots ~ Location,\n  Sales ~ Location,\n  Sales ~ ParkingSpots,\n  coords = list(x = c(Sales = 3, Location = 2, ParkingSpots = 1),\n                y = c(Sales = 0, Location = 1, ParkingSpots = 0))\n)\n# Plot DAG\nggdag(Parkingspots, use_labels = \"name\", text =  F) + theme_dag()\n```\n\n::: {.cell-output-display}\n![](05_dag_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n2. Regression\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-3_bd414ac78274f039dabf10f8ca7198da'}\n\n```{.r .cell-code}\n# Load the file\ncar_prices <- readRDS(\"Causal_Data_Science_Data/customer_sat.rds\")\n# Create a Data Frame\ndf=data.frame(car_prices)\n```\n:::\n\n2.1 Regress satisfaction on follow_ups \n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-4_a3f169ae1b3a2a02959827547289fd8a'}\n\n```{.r .cell-code}\n#lm_2_1 is the regresssion of satisfaction on follow_ups\nlm_2_1 <- lm(satisfaction ~ follow_ups , data = df)\nsummary(lm_2_1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = satisfaction ~ follow_ups, data = df)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -12.412  -5.257   1.733   4.506  12.588 \n#> \n#> Coefficients:\n#>             Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)  78.8860     4.2717  18.467 1.04e-10 ***\n#> follow_ups   -3.3093     0.6618  -5.001 0.000243 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 7.923 on 13 degrees of freedom\n#> Multiple R-squared:  0.658,\tAdjusted R-squared:  0.6316 \n#> F-statistic: 25.01 on 1 and 13 DF,  p-value: 0.0002427\n```\n:::\n:::\n\n2.2 Regress satisfaction on follow_ups and account for subscription\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-5_e59b8f8d1a8787ec5c50f8d16ef0cc91'}\n\n```{.r .cell-code}\n#lm_2_2 is the regresssion of satisfaction on follow_ups and account for subscription\nlm_2_2 <- lm(satisfaction ~ follow_ups + subscription , data = df)\nsummary(lm_2_2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = satisfaction ~ follow_ups + subscription, data = df)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -4.3222 -2.1972  0.3167  2.2667  3.9944 \n#> \n#> Coefficients:\n#>                      Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)           26.7667     6.6804   4.007  0.00206 ** \n#> follow_ups             2.1944     0.7795   2.815  0.01682 *  \n#> subscriptionPremium   44.7222     5.6213   7.956 6.88e-06 ***\n#> subscriptionPremium+  18.0722     2.1659   8.344 4.37e-06 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 2.958 on 11 degrees of freedom\n#> Multiple R-squared:  0.9597,\tAdjusted R-squared:  0.9487 \n#> F-statistic: 87.21 on 3 and 11 DF,  p-value: 5.956e-08\n```\n:::\n:::\n\n\n\n3 Comparing the coefficients: \n\nIn the first regression with satisfaction on follow_ups are negatively correlated as increase in satisfaction with the product and service will decrease the follow_up calls to the clients.\n\nIn the second regression with satisfaction on follow_ups and account for subscription is highly correlated premium subscription levels than elite subscription levels.\n\n4 Plot the data\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-6_1816b7c617e02fada4dcf34d42c3850f'}\n\n```{.r .cell-code}\n# Not conditioning on subscription\nsubscription_not_cond <- ggplot(df, aes(x = satisfaction, y = follow_ups)) +\n  geom_point(alpha = .8) +\n  stat_smooth(method = \"lm\", se = F)\n\n# Conditioning on subscription \nsubscription_cond <- ggplot(df, aes(x = satisfaction, y = follow_ups, color = subscription)) +\n  geom_point(alpha = .8) +\n  stat_smooth(method = \"lm\", se = F) +\n  theme(legend.position = \"right\")\n\n# Plot both plots\nsubscription_not_cond\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> `geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](05_dag_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n```{.r .cell-code}\nsubscription_cond\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> `geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](05_dag_files/figure-html/unnamed-chunk-6-2.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}